# 接入指南

## 测试地址

 http://47.99.175.88

## 正式地址

 http://47.99.197.227

## 公共参数

| 名称    | 类型   | 必选 | 描述               |
| ------- | ------ | ---- | ------------------ |
| app_key | String | yes  | 系统分配的访问令牌 |
## 请求说明

1. `app_key`是所有接口的公共参数，在访问任何一个接口时，请务必加上 `app_key`，否则拒绝访问请求
2. 若出现`ip`不在白名单上的提示，请联系客服人员进行添加

## 请求范例

取消订单

```shell
curl -i -X POST -H "Content-type:application/x-www-form-urlencoded" \
-d "app_key=test_key" \
-d "order_id=7640112764569538614" \
http://47.99.175.88/v1/order/cancel
```

## 接入须知

1. 参照文档完成测试环境下的，下单，预估价格，取消订单，重叫订单，订单回调，等关键动作。
2. 请妥善保管服务方提供的关键参数，避免泄露造成的损失！

## 接入流程

1. 请求 `/v1/city/all`  获取全量开通城市列表接口,检查当前城市是否开通打车服务。（建议将全量数据存到本地做成数据字典，定期更新即可，不要每次发单都调用此接口）
2. 请求 `/v1/common/getAddress` 获取出发地和目的地。
3. 请求 `/v1/city/getId`获取当前城市Id
4. 请求 `/v1/order/getId` 接口获取订单Id
5. 请求 `/v1/order/request` 携带订单Id，出发地，时间，套餐等数据请求下单。
6. 请求 `/v1/order/detail` 获取行程中订单状态
7. 行程结束后，正常支付订单会通过回调接口通知支付状态